## Graph Editor 사용법 (요약)

### 1. 개요

* **Graph Editor**는 건물 내부 배경 이미지 위에 노드(방, 복도, 출입문 등)와 간선을 그려 그래프 형태로 관리할 수 있는 GUI 도구입니다.
* 만들어진 그래프는 JSON 파일로 저장/불러기가 가능하며, 축척(scale) 설정으로 실제 거리 기반 가중치를 계산할 수 있습니다.

---

### 2. 설치 및 실행

1. **의존성**: Python 3, PyQt5

   ```bash
   pip install PyQt5
   ```
2. **실행**:

   ```bash
   python graphmaker.py
   ```

---

### 3. 주요 UI 구성

* **툴바**: New, Load, Save, 모드 전환(노드 추가·편집·삭제, 간선 추가·삭제, 축척 설정), Apply Scale 버튼
* **Properties 패널**: 노드 추가/편집 시 이름과 유형(type) 선택 및 실시간 업데이트
* **캔버스**: 배경 이미지 위에 노드와 간선을 시각화

---

### 4. 기능별 사용법

#### 4.1 배경 이미지 설정 (New)

1. 툴바의 **New** 버튼 클릭
2. 파일 다이얼로그에서 건물 내부 도면 이미지 선택

#### 4.2 그래프 불러오기 (Load)

1. **Load** 버튼 클릭
2. JSON 파일 선택 → 저장된 배경, 노드, 간선, 축척을 모두 복원

#### 4.3 그래프 저장하기 (Save)

1. **Save** 버튼 클릭
2. 현재 배경 경로, 축척, 노드 위치·속성, 간선 가중치 정보가 JSON으로 저장

#### 4.4 노드 추가 (Node Add)

1. **Node Add** 모드 선택
2. Properties 패널에서 *이름*과 *유형* 설정(새 유형 추가 가능)
3. 이름 필드를 비울 시 기본값 이름으로 적용
4. 캔버스 클릭 → 해당 위치에 색 있는 원형 노드 생성

#### 4.5 노드 편집 (Node Edit)

1. **Node Edit** 모드 선택
2. 캔버스에서 수정할 노드 클릭(선택)
3. Properties 패널에서 이름과 유형을 즉시 변경
4. 노드 드래그로 위치 이동 가능

#### 4.6 노드 삭제 (Node Delete)

1. **Node Delete** 모드 선택
2. 삭제할 노드 클릭 → 해당 노드와 연결된 모든 간선 함께 삭제

#### 4.7 간선 추가 (Edge Add)

1. **Edge Add** 모드 선택
2. 연결할 두 노드를 순차적으로 클릭 → 노드 사이에 간선 생성

#### 4.8 간선 삭제 (Edge Delete)

1. **Edge Delete** 모드 선택
2. 삭제할 간선 클릭 → 해당 간선 삭제

#### 4.9 축척 설정 (Calibrate Scale & Apply Scale)

1. **Calibrate Scale** 모드 선택
2. 캔버스에서 여러 개의 간선을 클릭하여 빨간색으로 표시(선택)
3. 툴바의 **Apply Scale** 버튼 클릭
4. '선택된 총 픽셀 길이 → 실세계 미터' 입력
5. 새 축척이 적용되어 이후 추가되는 간선 가중치에 반영

---

### 5. 노드 유형 추가

* Properties 패널의 **Add Type** 버튼 클릭 → "유형명,#HEX색상" 형태 입력 → 새로운 노드 유형이 드롭다운에 추가

---

### 6. JSON 파일 구조

```json
{
  "background": "이미지 파일 경로",
  "scale": 1.234,
  "nodes": [
    {"id":1, "name":"Room101", "type":"Room", "x":100.0, "y":150.0},
    ...
  ],
  "edges": [
    {"source":1, "target":2, "weight":12.34},
    ...
  ]
}
```

* **background**: 선택한 이미지 경로
* **scale**: (미터/픽셀) 비율
* **nodes**: id, 이름, 유형, 좌표
* **edges**: 연결된 노드 id와 가중치

---

### 7. 팁

* 노드 편집 중에는 드래그와 속성 동시 편집이 가능합니다.
* 간선을 선택해 두고 Apply Scale을 눌러 한 번에 축척을 재조정하세요.
* JSON 파일을 통해 반복 작업 간에도 손쉽게 작업 상태를 복원할 수 있습니다.
